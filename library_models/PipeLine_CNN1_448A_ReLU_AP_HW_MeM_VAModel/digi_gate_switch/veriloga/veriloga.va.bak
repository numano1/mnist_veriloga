// VerilogA for PipeLine_CNN1_448A_ReLU_AP_HW_MeM_VAModel, digi_gate_switch, veriloga

`include "constants.vams"
`include "disciplines.vams"

module digi_gate_switch(
    input electrical Vin,   // Input voltage to be passed
    input electrical Ctrl,  // Control signal: when > Vth, pass Vin; else output 0
    output electrical Vout  // Output node
);
  // Parameter definitions
  parameter real Vth = 0.6;         // Control threshold voltage
  parameter real trf = 10e-12;      // 10 ps rise/fall time

  // Module-scope variable for the computed target voltage.
  real target;

  // Analog block to compute the target voltage based on Ctrl and Vin.
  analog begin : compute_target
    if (V(Ctrl) > Vth)
      target = V(Vin);
    else
      target = 0;
  end

  // Separate analog block to assign Vout using transition().
  analog begin : assign_output
    V(Vout) <+ transition(target, trf);
  end

endmodule
