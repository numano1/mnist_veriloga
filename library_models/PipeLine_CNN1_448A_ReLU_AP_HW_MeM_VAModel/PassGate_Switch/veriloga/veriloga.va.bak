// VerilogA for LeNet3, PassGate, veriloga

`include "constants.vams"
`include "disciplines.vams"

module PassGate_Switch(inout V1, inout V2, input Ctrl);
  parameter real Vhigh = 1.2; // High state voltage
  parameter real Vlow = 0.0; // Low state voltage
  parameter real Vth = 0.6; // Threshold voltage
  parameter real Rlow = 1; // Low state resistance
  parameter real Rhigh = 1e9; // High state resistance
  parameter real Gmin = 1e-12;  // Minimum conductance
  electrical V1, V2, Ctrl;
  real R; // Resistance for the transmission gate

  analog begin
    // Control logic for the transmission gate
    if (V(Ctrl) > Vth) begin
      R = Rlow; // Close the transmission gate
    end else begin
      R = Rhigh; // Open the transmission gate
    end

    // Model the transmission gate as a resistive connection  

//I(V1, V2) <+ V(V1, V2) / R + Gmin * (V(V1) - V(V2)); //was this
I(V1, V2) <+ V(V1, V2) / R + 1e-12;  // Avoid complete isolation


  end



endmodule
